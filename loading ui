shared.LoaderTitle = "Loading Script...";
shared.LoaderKeyFrames = {
    [1] = {60, 10},
    [2] = {60, 30},
    [3] = {120, 60},
    [4] = {240, 100}
};
local v2 = {
    LoaderData = {
        Name = shared.LoaderTitle or "A Loader",
        Colors = shared.LoaderColors or {
            Main = Color3.fromRGB(0, 0, 0),
            Topic = Color3.fromRGB(200, 200, 200),
            Title = Color3.fromRGB(255, 255, 255),
            LoaderBackground = Color3.fromRGB(40, 40, 40),
            LoaderSplash = Color3.fromRGB(0, 255, 255)
        }
    },
    Keyframes = shared.LoaderKeyFrames or {
        [1] = {1, 10},
        [2] = {2, 30},
        [3] = {3, 60},
        [4] = {2, 100}
    }
};
local v3 = {[1] = "", [2] = "", [3] = "", [4] = ""};
function TweenObject(v178, v179, v180)
    game.TweenService:Create(v178, TweenInfo.new(v179, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut), v180):Play();
end
function CreateObject(v181, v182)
    local v183 = Instance.new(v181);
    local v184;
    for v416, v417 in pairs(v182) do
        if (v416 ~= "Parent") then
            v183[v416] = v417;
        else
            v184 = v417;
        end
    end
    v183.Parent = v184;
    return v183;
end
local function v4(v186, v187)
    local v188 = Instance.new("UICorner");
    v188.CornerRadius = UDim.new(0, v186);
    v188.Parent = v187;
end

-- Loader UI Creation
local v5 = CreateObject("ScreenGui", {
    Name = "Core",
    Parent = game.CoreGui
});


local v6 = CreateObject("Frame", {
    Name = "Main",
    Parent = v5,
    BackgroundColor3 = v2.LoaderData.Colors.Main,
    BorderSizePixel = 0,
    ClipsDescendants = true,
    Position = UDim2.new(0.5, 0, 0.5, 0),
    AnchorPoint = Vector2.new(0.5, 0.5),
    Size = UDim2.new(0, 90, 0, 0)
});
v4(12, v6);
local v7 = CreateObject("ImageLabel", {
    Name = "UserImage",
    Parent = v6,
    BackgroundTransparency = 1,
    Image = "rbxassetid://123958108501740",
    Position = UDim2.new(0, 15, 0, 10),
    Size = UDim2.new(0, 50, 0, 50)
});
v4(25, v7);
local v8 = CreateObject("TextLabel", {
    Name = "UserName",
    Parent = v6,
    BackgroundTransparency = 1,
    Text = "Youtube: NeilDark",
    Position = UDim2.new(0, 75, 0, 10),
    Size = UDim2.new(0, 200, 0, 50),
    Font = Enum.Font.GothamBold,
    TextColor3 = v2.LoaderData.Colors.Title,
    TextSize = 14,
    TextXAlignment = Enum.TextXAlignment.Left
});
local v9 = CreateObject("TextLabel", {
    Name = "Top",
    TextTransparency = 1,
    Parent = v6,
    BackgroundColor3 = Color3.fromRGB(255, 255, 255),
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 30, 0, 70),
    Size = UDim2.new(0, 301, 0, 20),
    Font = Enum.Font.Gotham,
    Text = "Loader",
    TextColor3 = v2.LoaderData.Colors.Topic,
    TextSize = 10,
    TextXAlignment = Enum.TextXAlignment.Left
});
local v10 = CreateObject("TextLabel", {
    Name = "Title",
    Parent = v6,
    TextTransparency = 1,
    BackgroundColor3 = Color3.fromRGB(255, 255, 255),
    BackgroundTransparency = 1,
    Position = UDim2.new(0, 30, 0, 90),
    Size = UDim2.new(0, 301, 0, 46),
    Font = Enum.Font.Gotham,
    RichText = true,
    Text = "<b>" .. v2.LoaderData.Name .. "</b>",
    TextColor3 = v2.LoaderData.Colors.Title,
    TextSize = 14,
    TextXAlignment = Enum.TextXAlignment.Left
});
local v11 = CreateObject("Frame", {
    Name = "BG",
    Parent = v6,
    AnchorPoint = Vector2.new(0.5, 0),
    BackgroundTransparency = 1,
    BackgroundColor3 = v2.LoaderData.Colors.LoaderBackground,
    BorderSizePixel = 0,
    Position = UDim2.new(0.5, 0, 0, 70),
    Size = UDim2.new(0.8500000238418579, 0, 0, 24)
});
v4(8, v11);
local v12 = CreateObject("Frame", {
    Name = "Progress",
    Parent = v11,
    BackgroundColor3 = v2.LoaderData.Colors.LoaderSplash,
    BackgroundTransparency = 1,
    BorderSizePixel = 0,
    Size = UDim2.new(0, 0, 0, 24)
});
v4(8, v12);
local v13 = CreateObject("TextLabel", {
    Name = "StepLabel",
    Parent = v6,
    BackgroundTransparency = 1,
    Position = UDim2.new(0.5, 0, 1, -25),
    Size = UDim2.new(1, -20, 0, 20),
    Font = Enum.Font.Gotham,
    Text = "",
    TextColor3 = v2.LoaderData.Colors.Topic,
    TextSize = 14,
    TextXAlignment = Enum.TextXAlignment.Center,
    AnchorPoint = Vector2.new(0.5, 0.5)
});

function UpdateStepText(v191)
    v13.Text = v3[v191] or "";
end
function UpdatePercentage(v193, v194)
    TweenObject(v12, 0.5, {Size = UDim2.new(v193 / 100, 0, 0, 24)});
    UpdateStepText(v194);
end

-- Loader Animation Sequence
TweenObject(v6, 0.25, {Size = UDim2.new(0, 346, 0, 121)});
wait();
TweenObject(v9, 0.5, {TextTransparency = 0});
TweenObject(v10, 0.5, {TextTransparency = 0});
TweenObject(v11, 0.5, {BackgroundTransparency = 0});
TweenObject(v12, 0.5, {BackgroundTransparency = 0});
for v195, v196 in pairs(v2.Keyframes) do
    wait(v196[1]);
    UpdatePercentage(v196[2], v195);
end
UpdatePercentage(100, 4);
TweenObject(v9, 0.5, {TextTransparency = 1});
TweenObject(v10, 0.5, {TextTransparency = 1});
TweenObject(v11, 0.5, {BackgroundTransparency = 1});
TweenObject(v12, 0.5, {BackgroundTransparency = 1});
wait(0.5);
TweenObject(v6, 0.25, {Size = UDim2.new(0, 0, 0, 0)});
wait(0.25);

-- CREATE MAIN UI IMMEDIATELY AFTER LOADER FADES OUT
local Player = game:GetService("Players").LocalPlayer
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local Gui = Instance.new("ScreenGui")
local Main = Instance.new("Frame")
Main.Name = "MainUI"
Main.Size = UDim2.new(0, 0, 0, 0)  -- Start hidden for smooth transition
Main.Position = UDim2.new(0.5, -140, 0.5, -90)
Main.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
Main.BackgroundTransparency = 0.25
Main.BorderSizePixel = 0
Main.Active = true

local Corner = Instance.new("UICorner")
Corner.CornerRadius = UDim.new(0, 14)
Corner.Parent = Main

local Shadow = Instance.new("ImageLabel")
Shadow.Size = UDim2.new(1, 24, 1, 24)
Shadow.Position = UDim2.new(0, -12, 0, -12)
Shadow.BackgroundTransparency = 1
Shadow.Image = "rbxassetid://6010261993"
Shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
Shadow.ImageTransparency = 0.8
Shadow.ScaleType = Enum.ScaleType.Slice
Shadow.SliceCenter = Rect.new(49, 49, 450, 450)
Shadow.Parent = Main

local BlurEffect = Instance.new("BlurEffect")
BlurEffect.Size = 6
BlurEffect.Parent = game:GetService("Lighting")

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -20, 0, 40)
Title.Position = UDim2.new(0, 10, 0, 5)
Title.BackgroundTransparency = 1
Title.Text = "Kaizen Hub"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 15
Title.Font = Enum.Font.GothamBold
Title.TextYAlignment = Enum.TextYAlignment.Center
Title.Parent = Main

local StartBtn = Instance.new("TextButton")
StartBtn.Size = UDim2.new(1, -30, 0, 30)
StartBtn.Position = UDim2.new(0, 15, 0, 55)
StartBtn.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
StartBtn.BackgroundTransparency = 0.2
StartBtn.Text = "GENERATE SCRIPT MENU"
StartBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
StartBtn.TextSize = 12
StartBtn.Font = Enum.Font.GothamBold
StartBtn.AutoButtonColor = false

local BtnCorner = Instance.new("UICorner")
BtnCorner.CornerRadius = UDim.new(0, 8)
BtnCorner.Parent = StartBtn
StartBtn.Parent = Main

local LoadBg = Instance.new("Frame")
LoadBg.Size = UDim2.new(1, -30, 0, 4)
LoadBg.Position = UDim2.new(0, 15, 0, 95)
LoadBg.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
LoadBg.BackgroundTransparency = 0.6
LoadBg.BorderSizePixel = 0

local LoadBgCorner = Instance.new("UICorner")
LoadBgCorner.CornerRadius = UDim.new(1, 0)
LoadBgCorner.Parent = LoadBg

local LoadBar = Instance.new("Frame")
LoadBar.Size = UDim2.new(0, 0, 1, 0)
LoadBar.BackgroundColor3 = Color3.fromRGB(0, 175, 255)
LoadBar.BackgroundTransparency = 0.3
LoadBar.BorderSizePixel = 0
LoadBar.Parent = LoadBg

local LoadCorner = Instance.new("UICorner")
LoadCorner.CornerRadius = UDim.new(1, 0)
LoadCorner.Parent = LoadBar
LoadBg.Parent = Main

local Status = Instance.new("TextLabel")
Status.Size = UDim2.new(1, -30, 0, 18)
Status.Position = UDim2.new(0, 15, 0, 103)
Status.BackgroundTransparency = 1
Status.Text = "Ready to start..."
Status.TextColor3 = Color3.fromRGB(220, 220, 220)
Status.TextSize = 10
Status.Font = Enum.Font.Gotham
Status.Parent = Main

local AutoBlock = Instance.new("TextButton")
AutoBlock.Size = UDim2.new(1, -30, 0, 20)
AutoBlock.Position = UDim2.new(0, 15, 1, -30)
AutoBlock.BackgroundTransparency = 1
AutoBlock.Text = "Anti Detection: ON"
AutoBlock.TextColor3 = Color3.fromRGB(76, 175, 80)
AutoBlock.TextSize = 15
AutoBlock.Font = Enum.Font.GothamBold
AutoBlock.TextXAlignment = Enum.TextXAlignment.Left
AutoBlock.Parent = Main

Main.Parent = Gui
Gui.Parent = Player:WaitForChild("PlayerGui")

-- SMOOTH FADE-IN TRANSITION FOR MAIN UI
TweenService:Create(Main, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out), 
    {Size = UDim2.new(0, 280, 0, 180)}):Play()



-- NOW DESTROY LOADER
v5:Destroy();

-- MAIN UI FUNCTIONALITY
local blockOn = true
local isRunning = false

StartBtn.MouseButton1Click:Connect(function()
    if isRunning then return end
    isRunning = true
    
    StartBtn.Text = "Starting..."
    StartBtn.BackgroundColor3 = Color3.fromRGB(255, 152, 0)
    
    spawn(function()
        local startTime = tick()
        local duration = 5
        
        while tick() - startTime < duration do
            local progress = (tick() - startTime) / duration
            LoadBar.Size = UDim2.new(progress, 0, 1, 0)
            wait(0.03)
        end
        
        LoadBar.Size = UDim2.new(1, 0, 1, 0)
        StartBtn.Text = "Script Initializing..."
        StartBtn.BackgroundColor3 = Color3.fromRGB(33, 150, 243)
        Status.Text = "Almost ready..."
    end)
end)

AutoBlock.MouseButton1Click:Connect(function()
    blockOn = not blockOn
    if blockOn then
        AutoBlock.Text = "Anti Detection: ON"
        AutoBlock.TextColor3 = Color3.fromRGB(76, 175, 80)
    else
        AutoBlock.Text = "Anti Detection: OFF" 
        AutoBlock.TextColor3 = Color3.fromRGB(244, 67, 54)
    end
end)

-- DRAG FUNCTIONALITY
local dragging = false
local dragStart, startPos

Main.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = Main.Position
    end
end)

Main.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and (input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement) then
        local delta = input.Position - dragStart
        Main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

Gui.Destroying:Connect(function()
    BlurEffect:Destroy()
end)

print("AdoptMe UI loaded!")

-- ANTI-DETECTION (keep this running)
spawn(function()
    while wait() do
        function print() end
        function warn() end
        function error() end
        debug.traceback = function() return "Traceback blocked"; end
        debug.info = function() return "Info blocked"; end
        local mt = getrawmetatable(game);
        if (mt and not mt.__metatable) then
            setreadonly(mt, false);
            local oldIndex = mt.__index;
            local oldNewIndex = mt.__newindex;
            mt.__index = function(self, key)
                if (key == "debug" or key == "getrawmetatable") then
                    error("Anti Skid: Tampering detected!");
                end
                return oldIndex(self, key);
            end;
            mt.__newindex = function(self, key, value)
                if (key == "debug" or key == "getrawmetatable") then
                    error("Anti Skid: Tampering detected!");
                end
                return oldNewIndex(self, key, value);
            end;
            setreadonly(mt, true);
        end
        local function checkEnv()
            local blocked = {"_G", "debug", "getgenv", "getrawmetatable", "setfenv", "loadstring", "hookfunction"};
            for _, key in ipairs(blocked) do
                local success, result = pcall(function() return _G[key]; end);
                if (success and result) then
                    error("Anti Skid: Environment tampering detected!");
                end
            end
        end
        local function checkHooks()
            local blocked = {getrawmetatable, setreadonly, getgenv, debug.getinfo, debug.getregistry};
            for _, func in ipairs(blocked) do
                if func then error("Anti Skid: Hook tampering detected!"); end
            end
        end
        local HttpService = game:FindService("HttpService");
        if HttpService then
            HttpService.RequestAsync = function() error("HTTP Requests Blocked"); end;
            HttpService.GetAsync = function() error("HTTP Get Blocked"); end;
            HttpService.PostAsync = function() error("HTTP Post Blocked"); end;
        end
        function collectgarbage() error("GC Blocked"); end
        os.time = function() error("OS Time Blocked"); end;
        pcall(checkEnv);
        pcall(checkHooks);
    end
end);
